experiment:
  name: "WAVEGUIDE"
  description: "Single straight waveguide to test leakage in Split-Step methods."

physics:
  wavelength_um: 0.635
  probe_dia_um: 8.0
  probe_focus_um: 0.0

grid:
  n_physical: 1024
  n_padding: 256
  physical_width_um: 150.0

sample:
  type: "WAVEGUIDE"
  thickness_um: 200.0

  # Ground Truth Settings (Reference Solution)
  ground_truth:
    n_prop_fine: 2000      # High-res propagation steps for reference
    solver_type: "PADE"    # Which algorithm to trust as "truth"
    solver_params:
      pade_order: 8       # Very high accuracy for reference

    # # To SAVE the computed ground truth for later reuse:
    save_file: "./data/waveguide_gt_ref.npz"

    # # To LOAD a previously computed ground truth (skips generation):
    load_file: "./data/waveguide_gt_ref.npz"

  # Sample Generator Parameters
  params:
    delta_n: 0.1         # Scattering strength
    beta_n: 0.01        # Absorption
    width_um: 8.0
    n_background: 1.0

# Benchmarking List
solvers:
  - name: "Pade (Order 8)"
    type: "PADE"
    solver_params:
      pade_order: 8

  - name: "Spectral Pade (Order 8, 1 Iter)"
    type: "SPECTRAL_PADE"
    solver_params:
      pade_order: 8
      max_iter: 2
      transform_type: "FFT"
      solver_type: "bicgstab"
      preconditioner: "split_step"

  - name: "Spectral Pade (Order 8, 1 Iter, Symmetric Shifted)"
    type: "SPECTRAL_PADE"
    solver_params:
      pade_order: 8
      max_iter: 2
      transform_type: "FFT"
      solver_type: "bicgstab"
      preconditioner: "symmetric_shifted"

  - name: "Multislice (FFT)"
    type: "MULTISLICE"
    solver_params:
      transform_type: "FFT"
      symmetric: False

benchmark:
  step_counts: [4, 8, 16, 32, 64, 128, 256]
  save_beam_idx: 0
